
<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8" />
        <title>高级python知识 | LinkedList&#39;s Blog</title>
        <meta name="author" content="Ding Li" />
        <meta name="description" content="This is blog for Linkedlist771, mainly record some learning notes, thank you for your visit!" />
        <meta name="keywords" content="" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" />
        <link rel="icon" href="/images/favicon.png" />
        <script src="https://cdn.staticfile.org/vue/3.2.47/vue.global.prod.min.js"></script>
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/6.3.0/css/all.min.css" />
<link rel="stylesheet" href="/css/fonts.min.css" />
<script> const mixins = {}; </script>

<script src="https://polyfill.io/v3/polyfill.min.js?features=default"></script>


<script src="https://cdn.staticfile.org/highlight.js/11.7.0/highlight.min.js"></script>
<link
    rel="stylesheet"
    href="https://cdn.staticfile.org/highlight.js/11.7.0/styles/github.min.css"
/>
<script src="/js/lib/highlight.js"></script>


<script src="https://cdn.staticfile.org/KaTeX/0.16.4/katex.min.js"></script>
<script src="https://cdn.staticfile.org/KaTeX/0.16.4/contrib/auto-render.min.js"></script>
<link rel="stylesheet" href="https://cdn.staticfile.org/KaTeX/0.16.4/katex.min.css" />
<script src="/js/lib/math.js"></script>


<script src="/js/lib/preview.js"></script>









<link rel="stylesheet" href="/css/main.css" />

    <meta name="generator" content="Hexo 6.3.0"></head>
    <body>
        <div id="layout">
            <transition name="fade">
                <div id="loading" v-show="loading">
                    <div id="loading-circle">
                        <h2>LOADING</h2>
                        <p>加载过慢请开启缓存 浏览器默认开启</p>
                        <img src="/images/loading.gif" />
                    </div>
                </div>
            </transition>
            <nav id="menu" :class="{ hidden: hiddenMenu, 'menu-color': menuColor}">
    <div id="desktop-menu">
        <a class="title" href="/">
            <span>LINKEDLIST&#39;S BLOG</span>
        </a>
        
        <a href="/">
            <i class="fa-solid fa-house fa-fw"></i>
            <span>&ensp;Home</span>
        </a>
        
        <a href="/about">
            <i class="fa-solid fa-id-card fa-fw"></i>
            <span>&ensp;About</span>
        </a>
        
        <a href="/archives">
            <i class="fa-solid fa-box-archive fa-fw"></i>
            <span>&ensp;Archives</span>
        </a>
        
        <a href="/categories">
            <i class="fa-solid fa-bookmark fa-fw"></i>
            <span>&ensp;Categories</span>
        </a>
        
        <a href="/tags">
            <i class="fa-solid fa-tags fa-fw"></i>
            <span>&ensp;Tags</span>
        </a>
        
    </div>
    <div id="mobile-menu">
        <div class="title" @click="showMenuItems = !showMenuItems">
            <i class="fa-solid fa-bars fa-fw"></i>
            <span>&emsp;LINKEDLIST&#39;S BLOG</span>
        </div>
        <transition name="slide">
            <div class="items" v-show="showMenuItems">
                
                <a href="/">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-house fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Home</div>
                    </div>
                </a>
                
                <a href="/about">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-id-card fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">About</div>
                    </div>
                </a>
                
                <a href="/archives">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-box-archive fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Archives</div>
                    </div>
                </a>
                
                <a href="/categories">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-bookmark fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Categories</div>
                    </div>
                </a>
                
                <a href="/tags">
                    <div class="item">
                        <div style="min-width: 20px; max-width: 50px; width: 10%">
                            <i class="fa-solid fa-tags fa-fw"></i>
                        </div>
                        <div style="min-width: 100px; max-width: 150%; width: 20%">Tags</div>
                    </div>
                </a>
                
            </div>
        </transition>
    </div>
</nav>
<transition name="fade">
    <div id="menu-curtain" @click="showMenuItems = !showMenuItems" v-show="showMenuItems"></div>
</transition>

            <transition name="into">
                <div id="main" v-show="!loading">
                    <div class="article">
    <div>
        <h1>高级python知识</h1>
    </div>
    <div class="info">
        <span class="date">
            <span class="icon">
                <i class="fa-solid fa-calendar fa-fw"></i>
            </span>
            2023/8/5
        </span>
        
        
        <span class="tags">
            <span class="icon">
                <i class="fa-solid fa-tags fa-fw"></i>
            </span>
            
            <span class="tag">
                
                <a href="/tags/%E9%AB%98%E7%BA%A7python%E6%8A%80%E5%B7%A7/" style="color: #03a9f4">高级python技巧</a>
            </span>
            
        </span>
        
    </div>
    
    <div class="content" v-pre>
        <blockquote>
<p>这个博客主要记录在学习Python的使用技巧， 关于<code>异步编程</code> ， <code>decorator</code>, <code>GIL</code>, <code>CPython</code>的学习和使用。</p>
</blockquote>
<span id="more"></span>

<h1 id="Python-CookBook"><a href="#Python-CookBook" class="headerlink" title=" Python CookBook "></a><font color="red"> Python CookBook </font></h1><blockquote>
<p>下面内容取自<code>python cookbook</code>, 这本书其实很久前我就读过，不过由于没有使用过，导致基本现在没有什么印象了，现在重温下。</p>
</blockquote>
<h2 id="数据结构与算法"><a href="#数据结构与算法" class="headerlink" title="数据结构与算法"></a>数据结构与算法</h2><h2 id="文件和IO"><a href="#文件和IO" class="headerlink" title="文件和IO"></a>文件和IO</h2><ol>
<li><p>读取文本出现错误的编码， 如果无法进行正确的编码， 可以通过<code>errors</code>参数来处理：</p>
<pre><code class="python">with open(&quot;sample.txt&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;, errors=&quot;replace&quot;):
    pass 
</code></pre>
<p>除了<code>replace</code>还可以选择<code>ignore</code>,</p>
</li>
</ol>
<p>假设我们有一个名为<code>sample.txt</code>的文件，其内容为：</p>
<pre><code>Hello, world!
你好，世界！
Hello, ���!
</code></pre>
<p>其中，<code>���</code>代表一些无法识别或无法正确解码的字符。</p>
<ol>
<li>使用<code>replace</code>处理错误：</li>
</ol>
<pre><code class="python">with open(&quot;sample.txt&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;, errors=&quot;replace&quot;) as file:
    content = file.read()
    print(content)
</code></pre>
<p>输出：</p>
<pre><code>Hello, world!
你好，世界！
Hello, �!
</code></pre>
<p>可以看到，无法解码的字符<code>���</code>被替换为了一个<code>�</code>字符。</p>
<ol start="2">
<li>使用<code>ignore</code>处理错误：</li>
</ol>
<pre><code class="python">with open(&quot;sample.txt&quot;, &quot;r&quot;, encoding=&quot;utf-8&quot;, errors=&quot;ignore&quot;) as file:
    content = file.read()
    print(content)
</code></pre>
<p>输出：</p>
<pre><code>Hello, world!
你好，世界！
Hello, !
</code></pre>
<p>可以看到，无法解码的字符<code>���</code>被完全忽略了，所以在输出中它们完全消失了。</p>
<p>这个例子展示了如何使用<code>replace</code>和<code>ignore</code>参数来处理读取文件时遇到的编码错误。</p>
<ol start="2">
<li>将输出重定向到文件</li>
</ol>
<p>只需要这样做就行了：</p>
<pre><code class="python">with open(&quot;somefile.txt&quot;, &quot;r&quot;) as f:
    print(&quot;xxxx&quot;, file=f)
</code></pre>
<p>在Python中，当你打开一个文件，你可以指定文件的模式。对于文本文件，最常用的模式是<code>&#39;r&#39;</code>（读取）和<code>&#39;w&#39;</code>（写入）。但除此之外，还可以指定文件是以文本模式还是二进制模式打开的。这是通过在模式字符串中添加<code>&#39;t&#39;</code>或<code>&#39;b&#39;</code>来实现的。</p>
<p><code>&#39;r&#39;</code> vs <code>&#39;rt&#39;</code>:</p>
<ul>
<li><code>&#39;r&#39;</code>: 这是默认的文件打开模式，它表示以文本模式打开文件进行读取。在大多数情况下，当你只写<code>&#39;r&#39;</code>时，它实际上是<code>&#39;rt&#39;</code>，因为默认情况下文件是以文本模式打开的。</li>
<li><code>&#39;rt&#39;</code>: 这明确地表示以文本模式打开文件进行读取。在文本模式下，Python会自动处理平台特定的行结束符。例如，在Windows上，行结束符是<code>\r\n</code>，而在Unix和Linux上是<code>\n</code>。当你在文本模式下读取或写入文件时，Python会自动将这些转换为适当的行结束符。</li>
</ul>
<ol start="3">
<li>读写二进制文件</li>
</ol>
<p>在读写文件的时候， 通过<code>rb</code>和<code>wb</code>便可以进行二进制数据的读写， 写入的时候需要使用比如说:</p>
<pre><code class="python">b&quot;This is a byte string&quot;
</code></pre>
<p>在Python中，字符串（string）和字节串（byte string）是两种不同的数据类型，尽管它们在许多情境中都用于表示文本。以下是它们之间的主要区别以及一些示例：</p>
<ol>
<li><p><strong>定义</strong>:</p>
<ul>
<li><strong>字符串 (string)</strong>: 在Python中，字符串是由Unicode字符组成的序列。在Python 3中，字符串是默认的文本表示形式。</li>
<li><strong>字节串 (byte string)</strong>: 字节串是字节的序列，而不是Unicode字符。它们通常用于表示非文本数据或在需要原始字节数据的情境中。</li>
</ul>
</li>
<li><p><strong>字面量表示</strong>:</p>
<ul>
<li><strong>字符串</strong>: 使用单引号或双引号来定义。<pre><code class="python">s = &quot;This is a string&quot;
</code></pre>
</li>
<li><strong>字节串</strong>: 使用前缀<code>b</code>，后跟单引号或双引号。<pre><code class="python">b = b&quot;This is a byte string&quot;
</code></pre>
</li>
</ul>
</li>
<li><p><strong>用途</strong>:</p>
<ul>
<li><strong>字符串</strong>: 用于文本处理，如格式化、搜索、替换等。</li>
<li><strong>字节串</strong>: 用于二进制数据处理，如文件I&#x2F;O（特别是二进制文件），网络通信，以及与需要字节数据的库或API的交互。</li>
</ul>
</li>
<li><p><strong>示例</strong>:</p>
<ul>
<li><p><strong>编码和解码</strong>:<br>字符串可以被编码为字节串，通常使用某种字符编码（如UTF-8）。反之，字节串可以被解码为字符串。</p>
<pre><code class="python">s = &quot;你好&quot;
encoded = s.encode(&#39;utf-8&#39;)  # 编码为UTF-8格式的字节串
print(encoded)  # 输出: b&#39;\xe4\xbd\xa0\xe5\xa5\xbd&#39;

decoded = encoded.decode(&#39;utf-8&#39;)  # 解码为字符串
print(decoded)  # 输出: 你好
</code></pre>
</li>
<li><p><strong>文件操作</strong>:<br>当读取或写入二进制文件（如图像、音频或非文本格式的文件）时，通常使用字节串。</p>
<pre><code class="python">with open(&#39;image.jpg&#39;, &#39;rb&#39;) as f:  # &#39;rb&#39; 表示二进制读取模式
    data = f.read()  # data 是一个字节串
</code></pre>
</li>
</ul>
</li>
<li><p><strong>注意事项</strong>:</p>
<ul>
<li>在Python 3中，字符串和字节串不能直接进行许多操作（如连接或比较），除非它们都是相同的类型。尝试这样做会导致TypeError。</li>
<li>字符串和字节串在内部表示和存储方式上有所不同。字符串使用Unicode，可以直接表示世界上的大多数字符。而字节串只是原始字节，需要某种字符编码来解释这些字节为文本。</li>
</ul>
</li>
<li><p>文件读写的<code>X</code>模式和<code>W</code>模式</p>
</li>
</ol>
<p>在Python的文件操作中，<code>&#39;x&#39;</code> 和 <code>&#39;w&#39;</code> 是两种不同的文件打开模式，它们都与文件写入有关，但它们的行为有所不同。</p>
<ol>
<li><p><strong>‘w’ 模式 (写模式)</strong>:</p>
<ul>
<li>如果文件不存在，它会创建一个新文件。</li>
<li>如果文件已经存在，它会覆盖（即清空）该文件的内容。</li>
<li>主要用于写入文件，但如果文件已经存在，原有的内容会被新内容替代。</li>
</ul>
</li>
<li><p><strong>‘x’ 模式 (独占创建模式)</strong>:</p>
<ul>
<li>该模式只用于文件的创建。</li>
<li>如果文件不存在，它会创建一个新文件。</li>
<li>如果文件已经存在，它会引发一个<code>FileExistsError</code>异常。</li>
<li>主要用于确保文件是新创建的，而不是覆盖现有文件。</li>
</ul>
</li>
</ol>
<p><strong>示例</strong>:</p>
<p>考虑一个名为<code>example.txt</code>的文件，该文件已经存在并包含一些文本。</p>
<ul>
<li><p>使用 <code>&#39;w&#39;</code> 模式:</p>
<pre><code class="python">with open(&#39;example.txt&#39;, &#39;w&#39;) as f:
    f.write(&#39;New content&#39;)
</code></pre>
<p>这会清空<code>example.txt</code>的内容，并只写入<code>New content</code>。</p>
</li>
<li><p>使用 <code>&#39;x&#39;</code> 模式:</p>
<pre><code class="python">with open(&#39;example.txt&#39;, &#39;x&#39;) as f:
    f.write(&#39;New content&#39;)
</code></pre>
<p>由于<code>example.txt</code>已经存在，这会引发一个<code>FileExistsError</code>异常。</p>
</li>
</ul>
<p><strong>总结</strong>:</p>
<ul>
<li>如果您想写入一个文件，但不希望意外地覆盖现有文件，使用<code>&#39;x&#39;</code>模式是一个好选择。</li>
<li>如果您想写入一个文件，并且不介意覆盖现有文件（如果它存在的话），使用<code>&#39;w&#39;</code>模式。</li>
</ul>
<p>这两种模式都可以与其他模式组合，例如<code>&#39;xb&#39;</code>（独占创建二进制模式）或<code>&#39;wb&#39;</code>（写二进制模式）。</p>
<ol start="5">
<li>创建零时文件：</li>
</ol>
<ul>
<li>TemporaryFile()</li>
<li>NamedTemporaryFile()</li>
<li>TemporaryDictory()</li>
</ul>
<h2 id="包和模块管理"><a href="#包和模块管理" class="headerlink" title="包和模块管理"></a>包和模块管理</h2><h2 id="并发和多线程控制"><a href="#并发和多线程控制" class="headerlink" title="并发和多线程控制"></a>并发和多线程控制</h2><h2 id="系统管理"><a href="#系统管理" class="headerlink" title="系统管理"></a>系统管理</h2><h2 id="测试，调试，异常"><a href="#测试，调试，异常" class="headerlink" title="测试，调试，异常"></a>测试，调试，异常</h2><h2 id="C语言扩展"><a href="#C语言扩展" class="headerlink" title="C语言扩展"></a>C语言扩展</h2>
    </div>
    
    
    
    
    
    
    
</div>

                    <footer id="footer">
    <div id="footer-wrap">
        <div>
            &copy;
            2022 - 2023 LinkedList&#39;s Blog
            <span id="footer-icon">
                <i class="fa-solid fa-font-awesome fa-fw"></i>
            </span>
            &commat;Ding Li
        </div>
        <div>
            Based on the <a target="_blank" rel="noopener" href="https://hexo.io">Hexo Engine</a> &amp;
            <a target="_blank" rel="noopener" href="https://github.com/theme-particlex/hexo-theme-particlex">ParticleX Theme</a>
        </div>
        
    </div>


    
        <!-- 不蒜子统计 -->
        <span id="busuanzi_container_site_pv">
                本站总访问量<span id="busuanzi_value_site_pv"></span>次
        </span>
        <span class="post-meta-divider">|</span>
        <span id="busuanzi_container_site_uv" style='display:none'>
                本站访客数<span id="busuanzi_value_site_uv"></span>人
        </span>
        <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
  
</footer>

                </div>
            </transition>
            
            <transition name="fade">
                <div id="preview" ref="preview" v-show="previewShow">
                    <img id="preview-content" ref="previewContent" />
                </div>
            </transition>
            
        </div>
        <script src="/js/main.js"></script>
        
        




        
    </body>
</html>
